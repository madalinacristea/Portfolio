(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[454],{"96qd":function(e,t,n){"use strict";n.d(t,"a",(function(){return NotificationsList}));var a=n("ODXe"),i=n("DZdY"),o=n("yrBZ"),c=n("uQrA"),l=n("QqFe"),r=n("9m3B"),s=n("udU5"),u=n("630U"),d=n("q1tI"),b=n.n(d),f=n("7xvl"),m=n("z9go");const g={"location/DASHBOARD":"dashboard_v2","location/CATALOG":"catalog","location/COURSE":"course_landing_page","location/PATH":"path_landing_page","location/COURSE_CONTENT_ITEM":"le_course_content_item","location/PATH_CONTENT_ITEM":"le_path_content_item"},buildTrackNotificationClickHandler=e=>t=>{Object(m.b)("notification","clicked",{target:"notification_bell_cta",page_name:e&&g[e]||null,event_id:t.id,context:t.campaign,element:t.type}),Object(m.c)({target:"notification_bell_cta",page_name:e&&g[e],context:"topnav_bell",slug:t.campaign,element:t.type})},getSortedNotifications=(e,t)=>e.length?e.sort(byDateComparator).slice(0,t).map((e=>{var t,n;return{date:Object(f.a)(new Date(e.time)),id:e.id,iconSettings:{color:u.g["blue-900"]},link:e.href,text:e.description,unread:1===e.status,campaign:e.campaign_name,imageUrl:"url"===(null===(t=e.img)||void 0===t?void 0:t.type)?null===(n=e.img)||void 0===n?void 0:n.slug:"",type:e.type}})):[],byDateComparator=(e,t)=>new Date(t.time).getTime()-new Date(e.time).getTime();const _=Object(i.a)(o.a,{target:"e1ap6r091",label:"StyledScrollBox"})("");_.defaultProps={maxHeight:"520",overflow:"auto",tabIndex:-1};const p=Object(i.a)(o.a,{target:"e1ap6r090",label:"StyledShowMoreBox"})({name:"1urx3um",styles:"padding-bottom:1px"}),NotificationsList=({locationType:e,clearNotifications:t,notifications:n})=>{const i=Object(d.useState)(!1),f=Object(a.a)(i,2),O=f[0],E=f[1],h=O?[n.length,"Less"]:[3,"More"],j=Object(a.a)(h,2),A=j[0],x=j[1],v=n.length>0&&n.length<=A,handleShowMoreOrLess=()=>{O&&(e=>{Object(m.c)({target:"notification_show_more",page_name:e&&g[e],context:"topnav_bell"})})(e),E(!O)},clearAll=()=>{t(n.map((e=>e.id))),(e=>{Object(m.c)({target:"notification_clear_all",page_name:e&&g[e],context:"topnav_bell"})})(e)},clearOne=n=>{t([n.id]),((e,t)=>{Object(m.c)({target:"notification_clear",page_name:t&&g[t],slug:e.campaign,element:e.type,context:"topnav_bell"})})(n,e)};return b.a.createElement(u.a,{bg:"white",pt:32,pb:24,tabIndex:-1,role:"dialog","aria-label":`My notifications, ${n.length} notifications`},b.a.createElement(o.b,{alignItems:"center",flexDirection:"row",height:"40",justifyContent:"space-between",px:32,mb:16},b.a.createElement(c.a,{as:"h1",fontSize:22},"My Notifications"),v&&b.a.createElement(l.e,{onClick:clearAll,"aria-label":`Clear all ${n.length} notifications`},"Clear All")),b.a.createElement(o.a,{px:32},b.a.createElement(r.a,{name:"checkerDense",height:"1px",display:"flex"})),b.a.createElement(_,null,b.a.createElement(o.a,{pb:16},b.a.createElement(s.a,{notifications:getSortedNotifications(n,A),onNotificationClick:buildTrackNotificationClickHandler(e),onDismiss:e=>clearOne(e)})),n.length<=3?null:b.a.createElement(p,{px:32},b.a.createElement(l.e,{onClick:handleShowMoreOrLess,"data-testid":"Show "+x},"Show ",x))))}},QJz3:function(e,t,n){"use strict";n.d(t,"b",(function(){return useNotificationArea})),n.d(t,"c",(function(){return useNotificationInteractions})),n.d(t,"a",(function(){return useNotifications}));var a=n("q1tI"),i=n("/MKj"),o=n("G4qV"),c=n("GsXu"),l=n("tQXl");function useNotificationArea(e){const t=e.id,n=Object(a.useMemo)((()=>Object(l.a)(t)),[t]),c=Object(l.b)(n),r=Object(o.b)({notifications:n,unreadCount:c});return Object(i.useSelector)(r)}function useNotificationInteractions(){const e=Object(i.useDispatch)();return Object(a.useMemo)((()=>({notificationsDeleted:t=>e(Object(c.d)(t)),notificationsMarkedRead:t=>e(Object(c.e)(t))})),[e])}function useNotifications(e){!function useNotificationSubscribe(e){const t=Object(i.useDispatch)();return Object(a.useEffect)((()=>(t(Object(c.c)(e)),()=>{t(Object(c.b)(e.id))})),[t,e])}(e);return{data:useNotificationArea(e),actions:useNotificationInteractions()}}},gnd6:function(e,t,n){"use strict";n.d(t,"a",(function(){return NotificationsDropdown}));var a=n("ODXe"),i=n("yrBZ"),o=n("cdDR"),c=n("q1tI"),l=n.n(c),r=n("tFdb"),s=n("96qd"),u=n("Xxlx"),d=n("QJz3"),b=n("ixXQ");const NotificationsDropdown=e=>{const t=Object(d.a)(b.a.HEADER_AREA),n=t.data,f=t.actions,m=n.notifications,g=n.unreadCount,_=f.notificationsDeleted,p=e.locationType,O=Object(c.useRef)(null),E=Object(c.useState)(!1),h=Object(a.a)(E,2),j=h[0],A=h[1],x=l.a.createElement("div",{ref:O},l.a.createElement(i.b,{height:"40",alignItems:"center",justifyContent:"center"},l.a.createElement(u.a,{data:{context:"global_nav",target:"notification_bell"},disableTracking:!!j,"aria-label":"notifications","data-testid":"notification_bell"},l.a.createElement(r.a,{theme:e.theme,key:"notification-bell",unreadCount:g,onClick:()=>{A(!j)}}))));return l.a.createElement(l.a.Fragment,null,x,l.a.createElement(o.a,{align:"right",verticalOffset:1,outline:!0,isOpen:j,onRequestClose:()=>{A(!1)},targetRef:O},l.a.createElement(i.b,{bg:"white",width:360,textAlign:"left"},l.a.createElement(s.a,{locationType:p,notifications:m,clearNotifications:_}))))}},ixXQ:function(e,t,n){"use strict";let a;n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),function(e){e.streaks="streaks",e.achievements="achievements"}(a||(a={}));const i={HEADER_AREA:{id:"bell",types:[],showRead:!0},TOAST_AREA:{id:"toast",types:[a.achievements,a.streaks],showRead:!1,limit:3,timeframe:1800}}},tFdb:function(e,t,n){"use strict";n.d(t,"a",(function(){return NotificationBell}));var a=n("ODXe"),i=n("yrBZ"),o=n("Apmp"),c=n("TSYQ"),l=n.n(c),r=n("q1tI"),s=n.n(r),u=n("QJz3"),d=n("ixXQ"),b={bell:"bell__AzBwO6vfXd1vBBNs_toEi",light:"light__2QkOxErjEG_gJjXx-P0vkr",unread:"unread__CEzUq-gsL9aPdjh-k_4RR"};const NotificationBell=({theme:e="dark",unreadCount:t,onClick:n})=>{const c=Object(r.useState)(),f=Object(a.a)(c,2),m=f[0],g=f[1],_=Object(u.a)(d.a.HEADER_AREA),p=_.data,O=_.actions,E=p.notifications;Object(r.useEffect)((()=>{g(window.document.querySelector('link[rel="shortcut icon"]'))}),[]),Object(r.useEffect)((()=>{m&&(m.href=`/favicon${t?"-unread":""}.ico`)}),[t,m]);const h=l()(b.bell,b[""+e]);return s.a.createElement("button",{className:h,onClick:()=>{n&&n(),0!==t&&O.notificationsMarkedRead(E.map((e=>e.id)))},type:"button","aria-label":t>0?`Toggle Notification Menu, ${t} notifications`:"Toggle Notification Menu"},s.a.createElement(o.a,{size:20}),0!==t&&s.a.createElement(i.a,{id:"notification-count",bg:"red-500",borderRadius:"3px",height:"18",position:"absolute",left:"16",textAlign:"center",top:"-8",width:"20"},s.a.createElement("p",{className:b.unread},t>99?99:t)))}}}]);
//# sourceMappingURL=454.9102c8b7f225155d273f.chunk.js.map